<div class="row">
	<div class="col-12">
		<h3>ユーザー情報変更</h3>
	</div>
</div>

<%= form_with model: @user, local: true do |f| %>

	<div class="row">
		<div class="col-sm-8 col-md-6 col-lg-4">
			<label>
				<div class="row">
					<div class="col-12">

						<%= attachment_image_tag @user, :image, :fill, 300, 200, fallback: 'no_image.jpg', size: '300x200', id: 'img_prev' %>
					</div>
				</div>
				<div class="row">
					<div class="col-10 btn btn-primary btn-md" style="margin: 20px auto;">
						画像選択<%= f.attachment_field :image, style: 'display: none;', id:'user_img' %>
					</div>
				</div>
			</label>
		</div>

		<div class="col-md-6 col-lg-4">
		<!-- ↑余裕があればpositionで設定 -->

			<div class="form-row">
				<div class="col-6">
					<%= f.text_field :last_name, placeholder: "姓", class: "form-control" %>
				</div>
				<div class="col-6">
					<%= f.text_field :first_name, placeholder: "名", class: "form-control" %>
				</div>
			</div>
			<div class="form-row">
				<div class="col-6">
					<%= f.text_field :read_last_name, placeholder: "セイ", class: "form-control" %>
				</div>
				<div class="col-6">
					<%= f.text_field :read_first_name, placeholder: "メイ", class: "form-control" %>
				</div>
			</div>
			<div class="form-row">
				<div class="col-12">
					<%= f.email_field :email, placeholder: "メールアドレス", class: "form-control" %>
				</div>
			</div>
			<div class="form-row">
				<div class="col-12">
					<%= f.text_area :introduction, placeholder: "自己紹介文(１００文字以内)", class: "form-control", rows: "6" %>
				</div>
			</div>
			<div class="form-row">
				<div class="col-8">
					<%= f.submit '更新する', class: "btn btn-success", style: "width: 100%" %>
				</div>
				<div class="col-4">
					<%= link_to '退会', retire_user_path, class: "btn btn-danger", style: "width: 100%" %>
				</div>
			</div>
		</div>
<% end %>



<script type="text/javascript">
  $(function() {
    function readURL(input) {
        if (input.files && input.files[0]) {
        var reader = new FileReader();
        reader.onload = function (e) {
    $('#img_prev').attr('src', e.target.result);
        }
        reader.readAsDataURL(input.files[0]);
        }
    }
    $("#user_img").change(function(){
        readURL(this);
    });
  });
</script>